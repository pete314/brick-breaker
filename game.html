<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./style/main.css" />
    </head>
    <body class="bodygame">
        <canvas id="gamecanvas"></canvas>
        
        <script src="./js/objects/brick.js"></script>
        <script src="./js/objects/ball.js"></script>
        <script type="text/javascript">
            //Init cavas
            var canvas = document.getElementById('gamecanvas');
            var ctx = canvas.getContext('2d');
            
            //resize to fit window
            ctx.canvas.width  = window.innerWidth;
            ctx.canvas.height = window.innerHeight;
            
            /*
            //constants
            var BRICK_CONSTANTS = {width: 65, height: 20, gap: 4};
            
            //calculate bricks per row based on dinamic width (remove 10pc margin both sides)
            var column_cnt =  Math.floor((window.innerWidth - 20) / (BRICK_CONSTANTS.width + (BRICK_CONSTANTS.gap / 2)));
            
            var bricks = Array();
            
            for(var y = 0; y < 5; y++){
                for(var i = 0; i < column_cnt; i++){
                    var brick = new Brick(
                        ctx, 
                        BRICK_CONSTANTS.height,
                        BRICK_CONSTANTS.width,
                        y == 0 ? 10 : y * (BRICK_CONSTANTS.height + (BRICK_CONSTANTS.gap /2)),
                        i == 0 ? 10 : i * (BRICK_CONSTANTS.width + (BRICK_CONSTANTS.gap /2)),
                        "yellow"
                    );
                    brick.draw();
                    bricks.push(brick);
                }
            }
            */
            
            var bricks = new Bricks();
            bricks.init();
            var ball = new Ball(ctx, 150, 150, 10, 10, "red", 10);
            ball.draw();
            
            step();
            
            function step() {
              ctx.clearRect(0, 0, canvas.width, canvas.height);
              ball.update();
              bricks.redrawBricks();
              requestAnimationFrame(step);
            }
        </script>
    </body>
</html>
